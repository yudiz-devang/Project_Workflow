<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrial Survey App - Project Flow Diagram</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .flow-container {
            padding: 40px;
            background: #f8f9fa;
        }

        .flow-section {
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 30px;
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .flow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            position: relative;
        }

        .flow-step {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left: 5px solid;
        }

        .flow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .step-mobile { border-left-color: #27ae60; }
        .step-api { border-left-color: #3498db; }
        .step-database { border-left-color: #f39c12; }
        .step-admin { border-left-color: #e74c3c; }
        .step-sync { border-left-color: #9b59b6; }

        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .step-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            font-size: 1.1rem;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2c3e50;
        }

        .step-description {
            color: #7f8c8d;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .step-details {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .step-details h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .step-details ul {
            list-style: none;
            margin: 0;
        }

        .step-details li {
            padding: 5px 0;
            position: relative;
            padding-left: 20px;
            color: #555;
        }

        .step-details li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #3498db;
            font-weight: bold;
        }

        .api-call {
            background: #e8f4f8;
            border: 1px solid #3498db;
            border-radius: 6px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 10px 0;
            color: #2c3e50;
        }

        .decision-flow {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .decision-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .decision-branches {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .decision-branch {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .branch-condition {
            font-weight: 700;
            color: #e74c3c;
            margin-bottom: 10px;
        }

        .branch-action {
            color: #2c3e50;
            font-size: 0.9rem;
        }

        .offline-indicator {
            background: #ff6b6b;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: inline-block;
            margin: 5px 0;
        }

        .online-indicator {
            background: #51cf66;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: inline-block;
            margin: 5px 0;
        }

        .data-flow-diagram {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .data-flow-title {
            font-size: 1.8rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .flow-component {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            flex: 1;
            min-width: 150px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .flow-arrow {
            font-size: 2rem;
            color: #3498db;
            font-weight: bold;
        }

        .component-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        .component-name {
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .component-desc {
            font-size: 0.8rem;
            color: #7f8c8d;
        }

        .timeline {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .timeline-title {
            font-size: 1.8rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .timeline-item {
            display: flex;
            margin-bottom: 30px;
            position: relative;
        }

        .timeline-item:before {
            content: "";
            position: absolute;
            left: 20px;
            top: 50px;
            bottom: -30px;
            width: 2px;
            background: #e0e0e0;
        }

        .timeline-item:last-child:before {
            display: none;
        }

        .timeline-marker {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 20px;
            flex-shrink: 0;
            z-index: 1;
            position: relative;
        }

        .timeline-content {
            flex: 1;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }

        .timeline-phase {
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .timeline-desc {
            color: #555;
            margin-bottom: 10px;
        }

        .timeline-tasks {
            list-style: none;
        }

        .timeline-tasks li {
            padding: 3px 0;
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .flow-steps {
                grid-template-columns: 1fr;
            }
            
            .decision-branches {
                grid-template-columns: 1fr;
            }
            
            .flow-diagram {
                flex-direction: column;
            }
            
            .flow-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîÑ Industrial Survey App - Complete Project Flow</h1>
            <p>End-to-End Process Flow from Login to Report Generation</p>
        </div>

        <div class="flow-container">
            <!-- Phase 1: Authentication & Setup -->
            <div class="flow-section">
                <div class="section-title">üîê Phase 1: Authentication & Initial Setup</div>
                <div class="flow-steps">
                    <div class="flow-step step-mobile">
                        <div class="step-header">
                            <div class="step-number">1</div>
                            <div class="step-title">üì± Surveyor Login</div>
                        </div>
                        <div class="step-description">
                            TPI (Third Party Inspector) opens mobile app and enters credentials
                        </div>
                        <div class="step-details">
                            <h4>Mobile App Actions:</h4>
                            <ul>
                                <li>Enter username/password</li>
                                <li>Device registration</li>
                                <li>Biometric setup (optional)</li>
                            </ul>
                        </div>
                        <div class="api-call">POST /api/auth/login</div>
                        <div class="online-indicator">Online Required</div>
                    </div>

                    <div class="flow-step step-api">
                        <div class="step-header">
                            <div class="step-number">2</div>
                            <div class="step-title">üöÄ Authentication Process</div>
                        </div>
                        <div class="step-description">
                            Backend validates credentials and generates JWT token
                        </div>
                        <div class="step-details">
                            <h4>Backend Processing:</h4>
                            <ul>
                                <li>Validate user credentials</li>
                                <li>Check user permissions & zone access</li>
                                <li>Generate JWT token with claims</li>
                                <li>Log login attempt</li>
                            </ul>
                        </div>
                        <div class="api-call">Response: JWT Token + User Info</div>
                    </div>

                    <div class="flow-step step-sync">
                        <div class="step-header">
                            <div class="step-number">3</div>
                            <div class="step-title">üì• Master Data Sync</div>
                        </div>
                        <div class="step-description">
                            Download and cache all required master data for offline operation
                        </div>
                        <div class="step-details">
                            <h4>Data Downloaded:</h4>
                            <ul>
                                <li>Customer list for assigned zone/GA</li>
                                <li>Dynamic checklists & forms</li>
                                <li>Meter types & specifications</li>
                                <li>Previous survey history</li>
                            </ul>
                        </div>
                        <div class="api-call">GET /api/sync/master-data?zone={userZone}</div>
                        <div class="online-indicator">Online Required</div>
                    </div>
                </div>
            </div>

            <!-- Data Flow Diagram -->
            <div class="data-flow-diagram">
                <div class="data-flow-title">üìä Data Flow Architecture</div>
                <div class="flow-diagram">
                    <div class="flow-component">
                        <div class="component-icon">üì±</div>
                        <div class="component-name">Mobile App</div>
                        <div class="component-desc">SQLite Local DB</div>
                    </div>
                    <div class="flow-arrow">‚ü∑</div>
                    <div class="flow-component">
                        <div class="component-icon">üöÄ</div>
                        <div class="component-name">API Gateway</div>
                        <div class="component-desc">.NET Core Web API</div>
                    </div>
                    <div class="flow-arrow">‚ü∑</div>
                    <div class="flow-component">
                        <div class="component-icon">üóÑÔ∏è</div>
                        <div class="component-name">Database</div>
                        <div class="component-desc">SQL Server</div>
                    </div>
                    <div class="flow-arrow">‚ü∑</div>
                    <div class="flow-component">
                        <div class="component-icon">üíª</div>
                        <div class="component-name">Admin Panel</div>
                        <div class="component-desc">Blazor/React</div>
                    </div>
                </div>
            </div>

            <!-- Phase 2: Survey Process -->
            <div class="flow-section">
                <div class="section-title">üìã Phase 2: Survey Execution Process</div>
                <div class="flow-steps">
                    <div class="flow-step step-mobile">
                        <div class="step-header">
                            <div class="step-number">4</div>
                            <div class="step-title">üîç Customer Search</div>
                        </div>
                        <div class="step-description">
                            Search and select customer for survey using Customer ID
                        </div>
                        <div class="step-details">
                            <h4>Search Features:</h4>
                            <ul>
                                <li>Search by Customer ID</li>
                                <li>Auto-complete suggestions</li>
                                <li>View customer details & meter info</li>
                                <li>Check previous survey history</li>
                            </ul>
                        </div>
                        <div class="api-call">Local SQLite Query</div>
                        <div class="offline-indicator">Offline Capable</div>
                    </div>

                    <div class="flow-step step-mobile">
                        <div class="step-header">
                            <div class="step-number">5</div>
                            <div class="step-title">üìù Dynamic Form Loading</div>
                        </div>
                        <div class="step-description">
                            Load appropriate checklist based on customer's meter types and configuration
                        </div>
                        <div class="step-details">
                            <h4>Form Configuration:</h4>
                            <ul>
                                <li>Dynamic checklist based on meter types</li>
                                <li>Section-wise form structure</li>
                                <li>Conditional questions</li>
                                <li>Validation rules loading</li>
                            </ul>
                        </div>
                        <div class="offline-indicator">Offline Capable</div>
                    </div>

                    <div class="flow-step step-mobile">
                        <div class="step-header">
                            <div class="step-number">6</div>
                            <div class="step-title">üì∏ Data Collection</div>
                        </div>
                        <div class="step-description">
                            Fill survey forms, capture photos, and collect geo-location data
                        </div>
                        <div class="step-details">
                            <h4>Data Collection:</h4>
                            <ul>
                                <li>Section-wise form filling</li>
                                <li>In-app camera for photos</li>
                                <li>Automatic geo-tagging</li>
                                <li>OCR text recognition</li>
                                <li>Manual data entry backup</li>
                            </ul>
                        </div>
                        <div class="offline-indicator">Fully Offline</div>
                    </div>
                </div>
            </div>

            <!-- Decision Flow -->
            <div class="decision-flow">
                <div class="decision-title">ü§î Survey Completion Decision Point</div>
                <div class="decision-branches">
                    <div class="decision-branch">
                        <div class="branch-condition">üì± Save as Draft</div>
                        <div class="branch-action">
                            Data saved locally, can continue later. Partial sync when online.
                        </div>
                    </div>
                    <div class="decision-branch">
                        <div class="branch-condition">‚úÖ Complete Survey</div>
                        <div class="branch-action">
                            Requires customer OTP verification before final submission.
                        </div>
                    </div>
                    <div class="decision-branch">
                        <div class="branch-condition">üîÑ Continue Later</div>
                        <div class="branch-action">
                            Survey remains in progress, auto-saved locally for resumption.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Phase 3: Completion Process -->
            <div class="flow-section">
                <div class="section-title">‚úÖ Phase 3: Survey Completion & Verification</div>
                <div class="flow-steps">
                    <div class="flow-step step-mobile">
                        <div class="step-header">
                            <div class="step-number">7</div>
                            <div class="step-title">üîê OTP Verification</div>
                        </div>
                        <div class="step-description">
                            Customer provides OTP along with name, designation, and mobile number
                        </div>
                        <div class="step-details">
                            <h4>Verification Process:</h4>
                            <ul>
                                <li>Collect customer details</li>
                                <li>Enter OTP provided by customer</li>
                                <li>Validate completion status</li>
                                <li>Final data validation</li>
                            </ul>
                        </div>
                        <div class="offline-indicator">Offline Capable</div>
                    </div>

                    <div class="flow-step step-sync">
                        <div class="step-header">
                            <div class="step-number">8</div>
                            <div class="step-title">üì§ Data Synchronization</div>
                        </div>
                        <div class="step-description">
                            Upload survey data, photos, and geo-location to server when network available
                        </div>
                        <div class="step-details">
                            <h4>Sync Process:</h4>
                            <ul>
                                <li>Detect network availability</li>
                                <li>Upload survey responses</li>
                                <li>Upload photos with geo-data</li>
                                <li>Conflict resolution handling</li>
                                <li>Retry failed uploads</li>
                            </ul>
                        </div>
                        <div class="api-call">POST /api/sync/upload-survey</div>
                        <div class="online-indicator">Online Required</div>
                    </div>

                    <div class="flow-step step-api">
                        <div class="step-header">
                            <div class="step-number">9</div>
                            <div class="step-title">üîç Discrepancy Detection</div>
                        </div>
                        <div class="step-description">
                            Backend automatically detects discrepancies between collected data and master data
                        </div>
                        <div class="step-details">
                            <h4>Validation Checks:</h4>
                            <ul>
                                <li>Meter count vs master data</li>
                                <li>Meter type mismatches</li>
                                <li>Size specification differences</li>
                                <li>Installation status validation</li>
                            </ul>
                        </div>
                        <div class="api-call">Background: Discrepancy Analysis</div>
                    </div>
                </div>
            </div>

            <!-- Phase 4: Admin & Reporting -->
            <div class="flow-section">
                <div class="section-title">üìä Phase 4: Admin Panel & Reporting</div>
                <div class="flow-steps">
                    <div class="flow-step step-admin">
                        <div class="step-header">
                            <div class="step-number">10</div>
                            <div class="step-title">üìà Dashboard Updates</div>
                        </div>
                        <div class="step-description">
                            Real-time dashboard updates with survey completion statistics
                        </div>
                        <div class="step-details">
                            <h4>Dashboard Metrics:</h4>
                            <ul>
                                <li>Daily/Weekly/Monthly completions</li>
                                <li>Zone/GA wise progress</li>
                                <li>Pending surveys</li>
                                <li>Surveyor performance</li>
                            </ul>
                        </div>
                        <div class="api-call">GET /api/dashboard/metrics</div>
                    </div>

                    <div class="flow-step step-admin">
                        <div class="step-header">
                            <div class="step-number">11</div>
                            <div class="step-title">üìß Automatic Reports</div>
                        </div>
                        <div class="step-description">
                            Generate and email discrepancy reports with escalation mechanism
                        </div>
                        <div class="step-details">
                            <h4>Report Types:</h4>
                            <ul>
                                <li>Daily completion summary</li>
                                <li>Discrepancy reports</li>
                                <li>Pending verification lists</li>
                                <li>Performance analytics</li>
                            </ul>
                        </div>
                        <div class="api-call">Background: Report Generation</div>
                    </div>

                    <div class="flow-step step-database">
                        <div class="step-header">
                            <div class="step-number">12</div>
                            <div class="step-title">üìÅ Data Archival</div>
                        </div>
                        <div class="step-description">
                            Store completed surveys with full audit trail and historical access
                        </div>
                        <div class="step-details">
                            <h4>Storage Features:</h4>
                            <ul>
                                <li>Complete survey archive</li>
                                <li>Photo storage with metadata</li>
                                <li>Audit trail maintenance</li>
                                <li>Historical trend analysis</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline -->
            <div class="timeline">
                <div class="timeline-title">‚è±Ô∏è Development Timeline & Milestones</div>
                
                <div class="timeline-item">
                    <div class="timeline-marker">1</div>
                    <div class="timeline-content">
                        <div class="timeline-phase">Backend Foundation (Weeks 1-4)</div>
                        <div class="timeline-desc">Core API development, authentication, and database setup</div>
                        <ul class="timeline-tasks">
                            <li>Project setup and architecture</li>
                            <li>Authentication & JWT implementation</li>
                            <li>Master data management APIs</li>
                            <li>Database schema and migrations</li>
                        </ul>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker">2</div>
                    <div class="timeline-content">
                        <div class="timeline-phase">Mobile App Core (Weeks 5-8)</div>
                        <div class="timeline-desc">Mobile app development with offline capabilities</div>
                        <ul class="timeline-tasks">
                            <li>Mobile app project setup</li>
                            <li>Authentication and sync modules</li>
                            <li>Dynamic form rendering</li>
                            <li>Local database and offline storage</li>
                        </ul>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker">3</div>
                    <div class="timeline-content">
                        <div class="timeline-phase">Advanced Features (Weeks 9-12)</div>
                        <div class="timeline-desc">Photo capture, OCR, geo-tagging, and sync</div>
                        <ul class="timeline-tasks">
                            <li>Camera and photo management</li>
                            <li>OCR integration</li>
                            <li>Geo-location services</li>
                            <li>Data synchronization logic</li>
                        </ul>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker">4</div>
                    <div class="timeline-content">
                        <div class="timeline-phase">Admin Panel & Reports (Weeks 13-16)</div>
                        <div class="timeline-desc">Web-based admin panel and reporting system</div>
                        <ul class="timeline-tasks">
                            <li>Admin dashboard development</li>
                            <li>Report generation system</li>
                            <li>Email notification setup</li>
                            <li>Master data management UI</li>
                        </ul>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker">5</div>
                    <div class="timeline-content">
                        <div class="timeline-phase">Testing & Deployment (Weeks 17-20)</div>
                        <div class="timeline-desc">Comprehensive testing and production deployment</div>
                        <ul class="timeline-tasks">
                            <li>End-to-end testing</li>
                            <li>Performance optimization</li>
                            <li>User acceptance testing</li>
                            <li>Production deployment</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>